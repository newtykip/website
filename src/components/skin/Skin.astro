---
import "@south-paw/typeface-minecraft";

import SkinRenderer, {
    type Props,
} from "@/components/skin/SkinRenderer.svelte";
import { UUID } from "@/consts";

export { Controls } from "@/components/skin";

const { uuid = UUID, ...props } = Astro.props as Omit<
    Omit<Props, "uuid">,
    "username"
> & {
    uuid?: string;
};

const username = await fetch(
    `https://api.minecraftservices.com/minecraft/profile/lookup/${uuid}`,
)
    .then((res) => res.json())
    .then((data) => data.name as string);
---

<SkinRenderer client:only="svelte" {username} {uuid} {...props} />
